syntax = "proto3";

package gen;

import "empty.proto";

option go_package = "github.com/elangreza/edot-commerce/proto/gen";

message Stock {
    string product_id = 2;
    int64 quantity = 3;
}

message StockList {
    repeated Stock stocks = 1;
}

message GetStockRequest {
    repeated string product_ids = 1;
}

message ReserveStockRequest {
    string order_id = 1;
    repeated Stock stocks = 2;
}

message ReserveStockResponse {
    repeated int64 reserved_stock_ids = 1;
}

message ReleaseStockRequest {
    string order_id = 1;
}

message ReleaseStockResponse {
    repeated int64 released_stock_ids = 1;
}

message SetWarehouseStatusRequest {
    int64 warehouse_id = 1;
    bool status = 2;
}

message TransferStockBetweenWarehouseRequest {
    int64 from_warehouse_id = 1;
    int64 to_warehouse_id = 2;
    string product_id = 3;
    int64 quantity = 4;
}

service WarehouseService {
    rpc GetStocks(GetStockRequest) returns (StockList) {}
    rpc ReserveStock(ReserveStockRequest) returns (ReserveStockResponse) {}
    rpc ReleaseStock(ReleaseStockRequest) returns (ReleaseStockResponse) {}
    rpc SetWarehouseStatus(SetWarehouseStatusRequest) returns (Empty) {}
    rpc TransferStockBetweenWarehouse(TransferStockBetweenWarehouseRequest) returns (Empty) {}
}